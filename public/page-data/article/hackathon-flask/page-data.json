{"componentChunkName":"component---src-templates-article-index-tsx","path":"/article/hackathon-flask","result":{"pageContext":{"author":["Ryan Yang","https://ryqn.dev"],"link":["article","hackathon-flask"],"title":"Flask Quickstart (for hackathons)","summary":"A quickstart tutorial into using Flask. Meant to be short and to the point with a quick barebones starter code boilerplate to get you running asap.","tags":["web developement","beginner","Python","Flask","backend"],"date":{"updated":"Fri Feb 25 2022 18:17:00 GMT-0800 (Pacific Standard Time)","uploaded":"Fri Feb 25 2022 18:17:00 GMT-0800 (Pacific Standard Time)"},"content":"# Flask Hackathon Quickstart\n\n*note* this is a setup cheatsheet for hackers who need Flask. This tutorial is specifically for setting up Flask as a backend server and assumes you have a separate codebase for your frontend. For those of you know what SSR is, this tutorial is for a client-side rendered (CSR) front-end that calls a Flask backend for data only as opposed to server-side rendered (SSR) Flask web server that serves templated html files. If you don't know what this means, don't worry! It's only for people who know what they're looking for.\n\n```table-of-contents\n* [Intro](#intro)\n* [What is Flask?](#what-is-flask?)\n* [How to use this doc?](#how-to-use-this-doc?)\n    1. [Write basic Flask code](#write-basic-flask-code)\n    2. [Run Flask server locally](#run-flask-server-locally)\n    3. [use ngrok to tunnel your server to the internet](#use-ngrok-to-tunnel-your-server-to-the-internet)\n    4. [Call your backend from your frontend](#call-your-backend-from-your-frontend)\n* [Run Python in the browser](#run-python-in-the-browser)\n    1. [You can't](#you-can't)\n    2. [Flask flow chart](#flask-flow-chart)\n    3. [Is this a good idea?](#is-this-a-good-idea?)\n* [Wrap your already written Python code in Flask](#wrap-your-already-written-python-code-in-flask)\n    1. [Quick Example](#quick-example)\n* [Call an API](#call-an-api)\n    1. [Brief intro to API's using Yelp as an example](#brief-intro-to-api's-using-yelp-as-an-example)\n    2. [Why do I need a backend?](#why-do-i-need-a-backend?)\n    3. [Yelp API example](#yelp-api-example)\n    \n```\n\n## Intro\n\nYou were likely sent here because I told you to set up a Flask backend for a hackathon. The reasons leading up to that were likely because:\n\n• [you want to \"run\" python in the browser](#run-python-in-the-browser)\n\n• [you have a python program and want to attach it to a website](#wrap-your-already-written-python-code-in-flask)\n\n• [you need to call an api that cannot be called from the front-end / browser (yelp api is one example)](#call-an-api)\n\n• you need a backend\n\n• there are others but these are the most common ones\n\nClick on any of the above if you're curious *why* Flask is a good choice for this\n\n## What is Flask?\n\nFlask is a python library for setting up a webserver. It is *extremely* simple to use and is used by almost every big tech company. In the code samples below, you'll see how you can start a server in under 5 lines of code.\n\n## How to use this doc?\nThis tutorial is for a hackathon only. It will not go over how to host your server - only how to self host it for demo and test purposes.\n\nThe basics of how to setup Flask and integrate it with your frontend are as follows:\n\n1. [write basic flask code](#write-basic-flask-code)\n2. [run flask server locally](#run-flask-server-locally)\n3. [use ngrok to tunnel your server to the internet](#use-ngrok-to-tunnel-your-server-to-the-internet)\n4. [call your backend from your frontend and display response](#call-your-backend-from-your-frontend)\n6. [just show me the code dude](#just-show-me-the-code-dude)\n\n## Write basic Flask code\nFlask is a python library. This means we're going to need to have python installed on our computer. Also, we're going to need to install the some python libraries - including Flask.\n\nTo start off, let's create a new folder for our backend code and create a python file called `app.py` inside it.\n\n```file-json\n{\n    \"name\": \"basic-test\",\n    \"contents\": [\n        {\n            \"name\": \"app.py\", \n            \"type\": \"python\"\n        }\n    ]\n}\n```\n\n```python app.py\nfrom flask import Flask, jsonify\nfrom flask_cors import CORS\n\napp = Flask(__name__)\nCORS(app)\n\n@app.route('/')\ndef index():\n    return jsonify({'message': 'Hey, everything works!!'})\n\n```\n\nIf you notice in the code, we import 2 libraries: flask and flask_cors. In the next step, we'll install these libraries and then run our server.\n\n## Run Flask server locally\n\nLet's open up our Terminal (Mac) or Powershell/CMD (Windows) and navigate to the folder where our app.py file is located.\n\n```shell Terminal(Mac) AND Powershell/CMD(Windows)\n$~ pwd\n/should/print/path/to/project/yelp-test\n\n$~ ls\napp.py \n\n$~ pip install flask flask-cors\nRequirement already satisfied: flask in /usr/local/lib/python3.9/site-packages (2.0.2)\nRequirement already satisfied: Werkzeug>=2.0 in /usr/local/lib/python3.9/site-packages (from flask) (2.0.2)\nRequirement already satisfied: Jinja2>=3.0 in /usr/local/lib/python3.9/site-packages (from flask) (3.0.3)\n...\n\n# IMPORTANT NOTE: my terminal displays Requirement already satisfied. This is because I already have it installed, your terminal should show a bunch of things that are installing if you don't already have it\n\n```\n\nWe then need to tell flask where our code is.\n\n```shell Terminal(Mac) ONLY\n$~ export FLASK_APP=app.py\n```\n\n```shell Powershell/CMD(Windows) ONLY\n$~ set FLASK_APP=app.py\n```\n\nThen we run the command to start the server. There are 2 ways:\n```shell Terminal(Mac) AND Powershell/CMD(Windows)\n$~ flask run\n(If the above command doesn't work, you can also try the next command)\n\n$~ python -m flask run\n* Environment: production\nWARNING: This is a development server. Do not use it in a production deployment.\nUse a production WSGI server instead.\n* Debug mode: off\n* Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\n\n```\n\nYou can visit [http://localhost:5000](http://localhost:5000/) in your browser to verify that everything works.\n\n## Use ngrok to tunnel your server to the internet\n\nAt the moment, our server is only running on localhost -- meaning that it's only accessible on your computer. How can make it so anyone on the internet can access our server? We can use a tool call [ngrok](https://ngrok.com/) which is a free service that allows us to tunnel our server to the internet.\n\nGo ahead and install ngrok - which is an executable - and locate it in your terminal.\n\n```shell Terminal(Mac) ONLY\n$~ pwd\n/should/print/path/to/ngrok/installation\n\n$~ ls\nngrok\n\n$~ ../ngrok http 5000\n\nngrok by @inconshreveable                                                                                      (Ctrl+C to quit)\n                                                                                                                               \nSession Status                online                                                                                           \nAccount                       ------                                                                           \nVersion                       2.3.40                                                                                           \nRegion                        United States (us)                                                                               \nWeb Interface                 http://127.0.0.1:4040                                                                            \nForwarding                    http://63cb-129-234-br-1332.ngrok.io -> http://localhost:5000                                     \nForwarding                    https://63cb-129-234-br-1332.ngrok.io -> http://localhost:5000                                    \n                                                                                                                               \nConnections                   ttl     opn     rt1     rt5     p50     p90                                                      \n                              0       0       0.00    0.00    0.00    0.00                                     \n\n```\n\n```shell Powershell/CMD(Windows) ONLY\n$~ pwd\n/should/print/path/to/ngrok/installation\n\n$~ dir\nngrok.exe\n\n$~ ngrok.exe http 5000\n\nngrok by @inconshreveable                                                                                      (Ctrl+C to quit)\n                                                                                                                               \nSession Status                online                                                                                           \nAccount                       ------                                                                           \nVersion                       2.3.40                                                                                           \nRegion                        United States (us)                                                                               \nWeb Interface                 http://127.0.0.1:4040                                                                            \nForwarding                    http://63cb-129-234-br-1332.ngrok.io -> http://localhost:5000                                     \nForwarding                    https://63cb-129-234-br-1332.ngrok.io -> http://localhost:5000                                    \n                                                                                                                               \nConnections                   ttl     opn     rt1     rt5     p50     p90                                                      \n                              0       0       0.00    0.00    0.00    0.00                                     \n\n```\n\nKeep this running in addition to your server. Notice on `Forwarding` section, you see 2 links that are tunneled to your localhost. Go ahead and copy the https link. This link is how people can access our server through the internet. You can test this by having anyone on your team on a different computer try going on that link.\n\n## call your backend from your frontend\nNow that we have our server link, we need to access the server from our front-end (website). Let's create a brand new folder somewhere (since our front-end will not share any code with the backend) and create a basic html file with javascript.\n\n```file\n└── frontend-test (folder)\n    ├── script.js (javascript file)\n    └── index.html (html file)\n```\n\n```html index.html\n<!DOCTYPE html>\n<html>\n    <head>\n        <title>Learning</title>\n        <script src=\"./script.js\"></script>\n    </head>\n    <body>\n        <button onclick=\"callBackend()\">click me!</button>\n        <p id=\"display\">Wait for it...</p>\n    </body>\n</html>\n\n```\n\n```javascript script.js\nlet serverUrl = 'https://paste-your-ngrok-link-here.ngrok.io';\n\nfunction callBackend() {\n    fetch(serverUrl)\n        .then(res => res.json())\n        .then(data => {\n            document.getElementById('display').innerHTML = data.message\n        })\n}\n\n```\n\n## Use ngrok to tunnel your server to the internet\nWhen we're running our Flask server using `flask run` or `python -m flask run`, you'll notice that the link it hosts is on localhost - which you can access through [http://localhost:5000](http://localhost:5000). This description isn't 100% accurate but you can think of it this way for now: localhost is kinda like a mini internet that runs on your computer. You can access localhost like it's the internet except its only applications that are hosted on your computer - which means it's not connected to the REAL internet. \n\nSo since our server is running on the internet that only exists on our computer, we can't actually communicate with the server if we're on a different computer.\n\n## just show me the code dude\n\n[https://github.com/ryqndev/learn-ryqn-dev/tree/content-update/src/content/hackathon-flask/docs](https://github.com/ryqndev/learn-ryqn-dev/tree/content-update/src/content/hackathon-flask/docs)\n\n## Run python in the browser\n\n*\"I know python so I want to use python but I also want to write a website\"*\n\n### You can't\n\n**Long story short, you can't.** The browser can only understand HTML/CSS/JS. This is where a backend server comes in. A server is essentially another computer that sits on the internet listening for, and responding to, **http requests**. \n\nYou can run your server in whatever language you want, but for hackathons I recommend Python/Flask. Python is the programming language and Flask is the Python library that makes it easy to run a server. Flask isn't the only option for Python, of course -  Django is another popular python library for webservers - but for hackathons, beginners, and prototypers, I *highly* recommend Flask.\n\n### Flask flow chart\n\nWhen you run a server, you're essentially putting your computer on the internet and it is always listening for **http requests**. When your server receives a request, it proceses it (i.e. runs a python function) and returns the result to the person or computer making the request in the form of an **http response**.\n\nSo, your website will send an **http request** to your Flask server and sending data about what it wants the server to do. The server will execute the corresponding Python function that was specified in the **http request**. The server will then return the result to the website as an **http response**.\n\nIn this case, you're not *technically* executing python in the browser -- you're really just telling another computer that *can* run python what to do through the internet. \n\n### Is this a good idea?\n\n**Depends on the idea.**\n\nIf the code you want to run is simple or doable in javascript (90% of the time it is), then no you should write the logic in Javascript instead and not use a server altogether.\n\nIf you are using a specific Python library (ML and AI hacks usually fall into this category) and there is not Javascript equivalent, then you should use a Python server. After all, unless you're willing to rewrite the entire library in Javascript, use a backend. This logic is also applicable to \"unofficial\" libraries. For example, if you've already written a bunch of code in Python from a previous project or w/e, you can just import your old code and wrap the function calls in Flask endpoints.\n\nSo far, the reasons is: if your project relies on a bunch of python code, use a backend. The first question is just a language specific question.\n\n*one caveat to the above:* if the reason you need python libraries is visual in nature, it depends... again. If you need matplotlib to generate a chart, you can use a backend server to create a chart, export it as an image, and return the image to the browser so they can display it. In this case, it's ok to use python for visual purposes but I would recommend looking into Javascript charting libraries like Airbnb's @visx that allow you to make charts interactive rather than just an image. However, if you're using pygame to create a visual game, this will not work. Libraries like pygame open up a window on the computer that's running python and draw on that. \n\nThe second question is do you need a server? When someone goes on your website, their browser downloads the source code (html/css/js) and executes it in the browser. The variables, function calls, and all other data is stored on the website and it exists only on that one user's computer. So, if 10 people go on your website, there's no way for them to communicate with each other. **They are all running the code independently on their own computers.** \n\nIf you are writing a game, social media platform, or *anything* that requires shared data between clients (users), then you need to have a server. A server, in this case, serves as a central hub for all the clients. Every person who connects to your website needs to send their data to a server (and usually, in these cases, the server will have a database so they can manage all the data more easily).\n\nA quick example in case it's still not very clear: Take instagram/facebook/twitter for example. When a user connects to the website, they will send a request to the server asking for a list of posts to display on their news feed. When a user wants to post something, they will send that post data to the server. The server will then save that data and the next time someone asks for a list of posts, they will get an updated list of posts that include the most recent ones posted.\n\nIf you want more examples or are still confused, fear not, it's a hard concept to follow at first so go ahead and find me or send me a message and I'll happily explain it in person.\n\n### Basic Flask server\n\n```file\n└── basic-test (folder)\n    └── app.py (python file)\n```\n\n```python app.py\nfrom flask import Flask, jsonify, request\nfrom flask_cors import CORS\n\napp = Flask(__name__)\nCORS(app)\n\n# Access this endpoint through: http://localhost:5000/\n@app.route('/')\ndef index():\n    return jsonify({'message': 'Hey, everything works!!'})\n\n\"\"\"\nAccess this endpoint through: http://localhost:5000/adding-test?x=1&y=2\n\nTakes two numbers, adds them together, and returns the value. \nNot a very good case for setting up and hosting an entire backend\nserver but this example shows a proof of concept of how it works.\n\nFor a simple example like this, you're better of just writing this \nin javascript.\n\"\"\"\n@app.route('/adding-test')\ndef add():\n    sum_result = int(request.args.get('x')) + int(request.args.get('y'))\n\n    return jsonify({\n        \"answer\": sum_result\n    })\n\n```\n\nWhen we run it, we can test our server to see how it works:\n![Add basic example](./assets/add-example.png)\n\n## Wrap your already written Python code in Flask\n\nRead the concepts listed above. The only difference between the above and below is that we will import our files and wrap them in Flask endpoints. If you know how do basic imports in Python, then this part is self-explanatory.\n\n### Quick example\n\n```file\n└── yelp-test (folder)\n    ├── your_code.py (your custom python file)\n    └── app.py (python file)\n```\n\n```python your_code.py\ndef really_complex_function():\n    # imagine you wrote this function last quarter in one of your CS \n    # classes and you want to use it in this project.\n    ml_ai_blockchain_vr_ar_big_result = 3\n    # Boom. imagine i just did a bunch of stuff and ended up at the result 3\n    return ml_ai_blockchain_vr_ar_big_result\n```\n\n```python app.py\nfrom flask import Flask, jsonify, request\nfrom flask_cors import CORS\n\nfrom your_code import really_complex_function\n\napp = Flask(__name__)\nCORS(app)\n\n# Access this endpoint through: http://localhost:5000/\n@app.route('/')\ndef index():\n    return jsonify({'message': 'Hey, everything works!!'})\n\n# Access this endpoint through: http://localhost:5000/complex-test\n@app.route('/complex-test')\ndef yelp_default_test():\n    return jsonify({\"result\": really_complex_function()})\n\n```\n\n## Call an API \n\n\n### Brief intro to API's using Yelp as an example\n\nWe can think of API's (in a hackathon sense atleast) as a way to utilize another program's functionality. As an example, we can take a look at the Yelp API. Yelp, if you're not familiar, is a platform for users to review businesses. Because of this, Yelp actually has a very, very big and comprehensive database of restaurants and businesses and they offer this service to developers for free (as of 2022 - we don't expect this to change). And so, Yelp offers something called an API (Application Programming Interface) - i.e. an interface, or bridge, that connects your service to theirs - detailing how anyone can make use of this service.\n\nSo, as a quick example, if your hackathon idea is an app that displays a list of nearby boba stores near you, you could use the Yelp API's business search functionality to query a list of restaurants categorized as \"bubbletea\" using a lattitude and longitude taken from the user's location.\n\nOne thing to note is that to call the Yelp API, you need to have a Yelp API key. This is a secret key that is used to authenticate your application given to you when you sign up for the Yelp API - which is used to rate limit your calls to ensure you're not abusing the Yelp API.\n\n\n### Why do I need a backend?\n\nYou can call API's directly from the website. In fact, when your front-end makes a request to your backend, that's an example of an API call. So then the question is, why would I need to setup and run a backend server to make Yelp API calls when I could just do it from the front-end and bypass a backend altogether? This is because the Yelp API actually doesn't allow their service to be reached from a browser/website (unless it's the actual Yelp website). \n\nNot every API service has this restriction but if you make an API call and you get a CORS error of some sort, it's probably because they have this filter set up. The reason why they do this is because if you make a call from the front-end, you expose your API key which should be kept secret.\n\nConceptually, the workflow of this entire app is as follows:\n\nWebsite gets user location -> \n\nWebsite sends the user location and other api call data to backend through an **http request** -> \n\nbackend will call the Yelp API through its own **http request** -> \n\nYelp will return an **http response** to the backend -> \n\nbackend will return contents of that **http response** to the website -> website will transform the raw JSON data into meaningful visual HTML components that users can understand easily.\n\n### Yelp API example\n\n```file\n└── yelp-test (folder)\n    └── app.py (python file)\n```\n\n```python app.py\nfrom flask import Flask, jsonify, request\nfrom flask_cors import CORS\nimport requests\n\nfrom your_code import really_complex_function\n\napp = Flask(__name__)\nCORS(app)\n\nYELP_AUTH_TOKEN = 'some-key-i-got-from-yelp'\n\n# Access this endpoint through: http://localhost:5000/\n@app.route('/')\ndef index():\n    return jsonify({'message': 'Hey, everything works!!'})\n\n# Access this endpoint through: http://localhost:5000/yelp-test\n@app.route('/yelp-test')\ndef yelp_default_test():\n    url = \"https://api.yelp.com/v3/businesses/search\"\n\n    querystring = {\"location\": \"Irvine, CA\", \"categories\": \"bubbletea\"}\n\n    headers = {\"Authorization\": \"Bearer \" + YELP_AUTH_TOKEN}\n\n    response = requests.request(\n        \"GET\", url, headers=headers, params=querystring)\n\n    return jsonify(response.json())\n\n```\n\nDon't forget to replace **line 10** with your own yelp api key above.\n\nAssuming you have Python3 / pip and can access it through Terminal(Mac) or Command Line/Powershell(Windows), you can get started by running these commands in the directory of the project\n\n```shell Terminal (Mac)\n$~ pwd\n/should/print/path/to/project/yelp-test\n\n$~ ls\napp.py \n\n$~ pip install flask flask-cors requests\nRequirement already satisfied: flask in /usr/local/lib/python3.9/site-packages (2.0.2)\nRequirement already satisfied: Werkzeug>=2.0 in /usr/local/lib/python3.9/site-packages (from flask) (2.0.2)\nRequirement already satisfied: Jinja2>=3.0 in /usr/local/lib/python3.9/site-packages (from flask) (3.0.3)\n...\n\nIMPORTANT NOTE: my terminal displays Requirement already satisfied. This is because I already have it installed, your terminal should show a bunch of things that are installing if you don't already have it\n\n$~ export FLASK_APP=app.py\n\n$~ flask run\n(If the above command doesn't work, you can also try the next command)\n\n$~ python -m flask run\n* Environment: production\nWARNING: This is a development server. Do not use it in a production deployment.\nUse a production WSGI server instead.\n* Debug mode: off\n* Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\n```\n\n\n```shell Powershell/Command Line (Windows)\n$~ pwd\n/should/print/path/to/project/yelp-test\n\n$~ dir\napp.py \n\n$~ pip install flask flask-cors requests\nRequirement already satisfied: flask in /usr/local/lib/python3.9/site-packages (2.0.2)\nRequirement already satisfied: Werkzeug>=2.0 in /usr/local/lib/python3.9/site-packages (from flask) (2.0.2)\nRequirement already satisfied: Jinja2>=3.0 in /usr/local/lib/python3.9/site-packages (from flask) (3.0.3)\n...\n\nIMPORTANT NOTE: my terminal displays Requirement already satisfied. This is because I already have it installed, your terminal should show a bunch of things that are installing if you don't already have it\n\n$~ set FLASK_APP=app.py\n\n$~ flask run\n(If the above command doesn't work, you can also try the next command)\n\n$~ python -m flask run\n* Environment: production\nWARNING: This is a development server. Do not use it in a production deployment.\nUse a production WSGI server instead.\n* Debug mode: off\n* Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\n```\n\nThen, once your server is running, you can go on http://localhost:5000/yelp-test in the browser and it should show you a list of boba stores near Irvine, CA. Now that we have verified that the backend is up and running, we need to link our front-end to our backend.\n\n"}},"staticQueryHashes":[],"slicesMap":{}}