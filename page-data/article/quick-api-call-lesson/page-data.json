{"componentChunkName":"component---src-templates-article-index-tsx","path":"/article/quick-api-call-lesson","result":{"pageContext":{"author":["Ryan Yang","https://ryqn.dev"],"link":["article","quick-api-call-lesson"],"title":"Quick API call lesson","summary":"For all those in a hackathon rush, this is a quick rundown on how to use the Yelp API and then prototype it with Insomnia, and then generate the code for you to use.","tags":["web developement","beginner","backend","API","Yelp"],"date":{"updated":"Fri Feb 03 2023 00:31:31 GMT-0800 (Pacific Standard Time)","uploaded":"Fri Feb 03 2023 00:31:31 GMT-0800 (Pacific Standard Time)"},"content":"# Quick API Call Lesson\n\n```table-of-contents\n* [Overview](#overview)\n* [Pick an API](#pick-an-api)\n* [Pick an endpoint](#pick-an-endpoint)\n* [Download Insomnia](#download-insomnia)\n* [Fill out the fields](#fill-out-the-fields)\n    1. [Endpoint](#endpoint)\n    2. [Auth](#auth)\n    3. [Query Params](#query-params)\n    4. [Results](#results)\n* [Taking this to code](#taking-this-to-code)\n* [Final](#final)\n\n```\n\n## Overview\nWe're going to learn how to read API documentation, mock API calls, and then finally, embed them into your app.\n\nThis article is written for a hackathon - which means you're running out of time already - so it'll be less explaining than usual and more of how to do it.\n\n\n## Pick an API\n\nFirst, we pick an API. Here, I'm going to use a simpler API as an example where I just make a single call and I'll get data back immediately. In this case, it's going to be the Yelp API. To use the Yelp API, I simply just ask them for a list of restaurants, and they'll return back a list of restaurant data. \n\nThat's the simplest one. There's a more complicated one called OAuth which revolves around user authentication. An example here is Spotify. Let's say you want to integrate Spotify's API so that you can get a random playlist created by a user. Well, the user has to first *authorize* your application to get their data. Have you ever seen something like this?\n\n![OAuth Spotify example](./assets/oauth.png)\n\nThis is part of the OAuth flow. A user will sign into your app, you will redirect them to Spotify to sign in, and then spotify will then return to your app with the access token. OAuth is slightly more complex but still pretty simple if you follow the instructions. \n\nWe'll worry about OAuth in a different article - for now, we're just focusing on the most basic API call.\n\n## Pick an endpoint\n\nMost API's will expose multiple functionalities. In the Yelp Fusion API, we can see a list of various functionalities on the right.\n\n![Yelp endpoint list](./assets/endpoints.png)\n\nThese various functionalities are known as endpoints. When you **hit** different endpoints, you're essentially calling different functions of the API. \n\nIn our example, we're going to be using the main endpoint: business search. \n\n## Download Insomnia\n\nWe're going to use a tool here called [Insomnia](https://insomnia.rest/) (if you've heard of [Postman](https://www.postman.com/), this is very similar). Go ahead and download it and open it up.\n\nYou should see something like this:\n\n![Insomnia Collection](./assets/insomnia-collection.png)\n\nand you can click that `(+)` plus button and create a `New Request`.\n\n![Insomnia Home](./assets/insomnia-home.png)\n\nIf you see something like this, then on the top right, click `Create` and then select `Request Collection`. Then continue with creating a New Request.\n\n\n## Fill out the fields\n\nNow, we just need to fill out the fields in Insomnia to mock our API call. Let's take a look at the documentation on the Yelp website to see how to use it:\n\n![Yelp docs](./assets/yelp-docs.png)\n\n### Endpoint\n\nFirst thing, we note the type of request, and the endpoint. The green button says `GET` request and the endpoint, so let's fill that out in Insomnia.\n\n![endpoint](./assets/endpoint-1.png)\n\n### Auth\nMost API's require authentication. This is so they make sure people don't abuse the API, or accidentally write an infinite loop and ends up DDOS'ing their servers. Some API's make the API key a query param (we'll do that next) but for Yelp, they use an Auth protocol called Bearer Tokens. We go to the `Auth` dropdown and select `Bearer`.\n\n![bearer token fill out](./assets/bearer-token-2.png)\n\n### Query Params\nFinally, looking back at the Yelp docs, we'll see that this API allows you to provide a bunch of query params. These are essentially just parameters (like a normal function) that you pass into the API. There are a bunch of them (you'll see some marked as **required** or **optional**) - to make this quick, we'll just use the location string.\n\n![query param](./assets/query-param-3.png)\n\n### Results\n\nClick `Send` and we'll see the results.\n\n![final results](./assets/result-4.png)\n\n## Taking this to code\n\nThe beauty of Insomnia (and Postman as well) is that you can rapidly prototype making API calls and once you're happy with it, you can immediately generate the code for it.\n\nHover over your request on the right and you should see a tiny triangle pop up. Click on that and you should see this menu:\n\n![generate code](./assets/generate-code.png)\n\nGenerate the code in the language you want and go wild with it!\n\n## Final\n\nSo why use Insomnia? You'll find yourself constantly iterating with the API's and this is a way for you rapidly prototype. Not only that, when you write a backend service yourself, you're essentially creating your own API. You can easily use Insomnia to test your own backend server.\n"}},"staticQueryHashes":[],"slicesMap":{}}