<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.13.7"/><meta data-react-helmet="true" name="author" content="Ryan Yang, https://ryqn.dev"/><meta data-react-helmet="true" name="keywords" content="web developement, API, backend, server, intermediate"/><meta data-react-helmet="true" name="description" content="You might have heard of services like Bit.ly or TinyURL and wondered, how are these URL shorteners made? We&#x27;ll explore the designs of these systems and then code our own."/><meta data-react-helmet="true" name="type" content="article"/><meta data-react-helmet="true" name="date" content="2021-12-14T18:34:32.000Z"/><meta data-react-helmet="true" name="og:title" content="Designing a URL shortener"/><meta data-react-helmet="true" name="og:site_name" content="learn.ryqn.dev"/><meta data-react-helmet="true" name="og:description" content="You might have heard of services like Bit.ly or TinyURL and wondered, how are these URL shorteners made? We&#x27;ll explore the designs of these systems and then code our own."/><meta data-react-helmet="true" name="og:type" content="article"/><meta data-react-helmet="true" property="article:author" content="Ryan Yang, https://ryqn.dev"/><meta data-react-helmet="true" property="article:tag" content="web developement, API, backend, server, intermediate"/><meta data-react-helmet="true" property="article:published_time" content="2021-12-14T18:34:32.000Z"/><meta data-react-helmet="true" property="article:modified_time" content="2021-12-14T18:34:32.000Z"/><meta data-react-helmet="true" name="google-site-verification" content="o0xH1avXNyKssUbhu7Vi6uxIaRBziY2vNFX8IXDOvdE"/><meta data-react-helmet="true" name="robots" content="index, follow"/><style data-href="/styles.f89eed1b2be3d1601e43.css" data-identity="gatsby-global-css">.Lab-module--container--5ba9a{display:grid;grid-template-columns:1fr;padding-top:60px}.Navigation-module--container--4c213{box-sizing:border-box;display:grid;gap:20px;grid-template-columns:auto 1fr auto;height:74px;padding:0 18px;place-content:center;position:fixed;top:0;width:100%;z-index:100}.Navigation-module--container--4c213 .Navigation-module--home--601ca{display:grid;gap:20px;grid-template-columns:auto auto;text-decoration:none}.Navigation-module--container--4c213 .Navigation-module--home--601ca .Navigation-module--title--f2a25{color:var(--accent);display:grid;font-family:Hyperwave;font-size:2.3em;place-content:center}.Navigation-module--container--4c213 img{height:36px;object-fit:contain;width:auto}.Navigation-module--container--4c213 .Navigation-module--tabs--cc9a3{display:grid;grid-auto-flow:column}.Navigation-module--container--4c213 .Navigation-module--tabs--cc9a3 .Navigation-module--tab--747d2{border:2px solid transparent;border-radius:2px;color:gray;display:grid;font-size:.86em;font-weight:700;padding:12px;place-content:center;text-decoration:none;text-transform:uppercase;transition:border-color .25s,color .25s;width:max-content}.Navigation-module--container--4c213 .Navigation-module--tabs--cc9a3 .Navigation-module--tab--747d2:hover{border-color:#333;color:#fff}.Search-module--container--ca5e5{display:grid;place-content:center;position:relative}.Search-module--container--ca5e5>.Search-module--wrapper--b97dd{height:38px;position:absolute;right:0;transition:width .35s;width:38px}@media screen and (min-width:980px){.Search-module--container--ca5e5>.Search-module--wrapper--b97dd{position:static;width:280px}}.Search-module--container--ca5e5>.Search-module--wrapper--b97dd>.Search-module--input--18232{background-color:var(--card);border:none;border-radius:4px;box-sizing:border-box;caret-color:var(--accent);color:var(--text);font-size:18px;height:38px;padding:6px 0 6px 38px;width:0}@media screen and (min-width:980px){.Search-module--container--ca5e5>.Search-module--wrapper--b97dd>.Search-module--input--18232{padding:6px 10px 6px 38px;width:100%}}.Search-module--container--ca5e5>.Search-module--wrapper--b97dd>.Search-module--results--626aa{background-color:var(--card);border-radius:4px;box-sizing:border-box;height:0;left:-53px;overflow:hidden;padding:0;position:absolute;top:56px;width:calc(100vw - 36px)}@media screen and (min-width:980px){.Search-module--container--ca5e5>.Search-module--wrapper--b97dd>.Search-module--results--626aa{left:0;width:100%}}.Search-module--container--ca5e5>.Search-module--wrapper--b97dd>.Search-module--results--626aa>.Search-module--overflow--978da{display:grid;row-gap:8px;width:100%}.Search-module--container--ca5e5>.Search-module--backdrop--0af50{background-color:transparent;height:100vh;left:0;pointer-events:none;position:fixed;top:0;transition:background-color .25s;-webkit-user-select:none;user-select:none;width:100vw;z-index:-1}.Search-module--container--ca5e5:focus-within>.Search-module--backdrop--0af50{background-color:rgba(0,0,0,.533)}.Search-module--container--ca5e5:focus-within>.Search-module--wrapper--b97dd{width:calc(100vw - 88px)}@media screen and (min-width:980px){.Search-module--container--ca5e5:focus-within>.Search-module--wrapper--b97dd{width:min(800px,50vw)}}.Search-module--container--ca5e5:focus-within>.Search-module--wrapper--b97dd>.Search-module--input--18232{box-sizing:border-box;outline:none;width:100%}.Search-module--container--ca5e5:focus-within>.Search-module--wrapper--b97dd>.Search-module--results--626aa{-ms-overflow-style:none;height:auto;max-height:calc(100vh - 100px);overflow-y:scroll;padding:0 8px 16px;scrollbar-width:none}.Search-module--container--ca5e5:focus-within>.Search-module--wrapper--b97dd>.Search-module--results--626aa::-webkit-scrollbar{height:0;width:0}.Search-module--icon--ed59d{fill:var(--accent);height:24px;left:0;padding:8px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;user-select:none;width:24px}.Search-module--label--7bcf1{height:0;left:0;position:absolute;top:0;width:0}.Result-module--container--6e44c{border-radius:4px;color:var(--text);display:grid;padding:16px;row-gap:8px;text-decoration:none;transition:background-color .25s}.Result-module--container--6e44c.Result-module--selected--af7b4{background-color:var(--background)}.Result-module--container--6e44c.Result-module--selected--af7b4>.Result-module--summary--033de{color:#fff}.Result-module--container--6e44c:hover{background-color:var(--background)}.Result-module--container--6e44c:hover>.Result-module--summary--033de{color:#fff}.Result-module--container--6e44c>.Result-module--title--be552{color:var(--accent);font-size:1.4em;font-weight:700;transition:color .25s}.Result-module--container--6e44c>.Result-module--summary--033de{color:gray}.Result-module--container--6e44c>.Result-module--tags--078a2{padding:8px 0 0}.Result-module--container--6e44c>.Result-module--tags--078a2>.Result-module--tag--378c6{background-color:#252a3b;border-radius:4px;display:inline-block;margin:0 8px 8px 0;padding:4px 6px}.Tooltip-module--container--2145e{background-color:var(--card);box-sizing:border-box;column-gap:8px;display:grid;grid-auto-flow:column;padding:24px 16px;place-content:center start;position:sticky;top:0}.Tooltip-module--container--2145e>.Tooltip-module--icon--67419{fill:var(--accent);background-color:#000;border:2px solid var(--accent);border-radius:2px;height:16px;width:16px}.Tooltip-module--container--2145e>p{color:var(--accent);display:grid;place-content:center}.CodeRenderer-module--container--3a830{background-color:var(--card);border-radius:8px;color:var(--text);font-family:Source Sans Pro;line-height:1.21em;padding:20px;white-space:pre-wrap}.CodeRenderer-module--container--3a830 h3{color:var(--accent);font-weight:700;padding:5px 5px 20px}.CodeRenderer-module--video--ddd99{height:0;overflow:hidden;padding-bottom:56.25%;position:relative;width:100%}.CodeRenderer-module--video--ddd99>iframe{height:100%;position:absolute;width:100%}.CodeRenderer-module--code--355fc{background-color:var(--card);border-radius:8px;margin:20px 0;overflow:hidden}.CodeRenderer-module--code--355fc .CodeRenderer-module--title--e3124{display:grid;grid-template-columns:100px 1fr}.CodeRenderer-module--code--355fc .CodeRenderer-module--title--e3124 h3{color:var(--text);font-family:Source Sans Pro,sans-serif;font-size:1rem;font-weight:700;padding-top:13px}.CodeRenderer-module--code--355fc .CodeRenderer-module--title--e3124 circle{cursor:pointer!important}.CodeRenderer-module--code--355fc .CodeRenderer-module--editor--bcb9f{padding:0 10px 20px}.CodeRenderer-module--code--355fc .CodeRenderer-module--editor--bcb9f:active{outline:none}.CodeRenderer-module--icon--8d135{fill:transparent;transition:fill .35s}.CodeRenderer-module--icon--8d135.CodeRenderer-module--hovered--c21f7{fill:#474747}.CodeRenderer-module--inline--88b7d{background-color:var(--card);border-radius:2px;color:var(--accent);line-height:2em;padding:4px 6px}.FileStructureDisplay-module--container--b74fa{background-color:var(--card);border-radius:8px;display:grid;grid-template-columns:auto auto 1fr;padding:16px 16px 24px}.FileStructureDisplay-module--container--b74fa h3{color:gray;font-weight:700;grid-column:1/-1;margin:0 0 16px}.FileStructureDisplay-module--container--b74fa .FileStructureDisplay-module--file--64288{column-gap:4px;display:grid;grid-column:3/-1;grid-template-columns:auto 1fr}.FileStructureDisplay-module--container--b74fa .FileStructureDisplay-module--folder--c78a5{column-gap:2px;display:grid;grid-column:3/-1;grid-template-columns:auto auto 1fr;row-gap:4px}.FileStructureDisplay-module--container--b74fa .FileStructureDisplay-module--folder--c78a5 .FileStructureDisplay-module--folderIcon--49790,.FileStructureDisplay-module--container--b74fa .FileStructureDisplay-module--folder--c78a5 .FileStructureDisplay-module--name--cadee{cursor:pointer}.FileStructureDisplay-module--container--b74fa .FileStructureDisplay-module--folder--c78a5 .FileStructureDisplay-module--arrow--796c8{cursor:pointer;transform:rotate(-90deg);transition:transform .25s}.FileStructureDisplay-module--container--b74fa .FileStructureDisplay-module--folder--c78a5 .FileStructureDisplay-module--arrow--796c8 svg{fill:#fff;height:1em;width:1em}.FileStructureDisplay-module--container--b74fa .FileStructureDisplay-module--folder--c78a5 .FileStructureDisplay-module--arrow--796c8.FileStructureDisplay-module--open--9836c{transform:rotate(0deg)}.FileStructureDisplay-module--container--b74fa i{display:grid;place-content:center}.FileStructureDisplay-module--container--b74fa i.FileStructureDisplay-module--python--341fd:before{color:#377ef0;content:"";font-family:Mfizz}.FileStructureDisplay-module--container--b74fa i.FileStructureDisplay-module--js--c39dd:before,.FileStructureDisplay-module--container--b74fa i.FileStructureDisplay-module--json--2360d:before{color:#f0dc4e;content:"";font-family:Mfizz}.FileStructureDisplay-module--container--b74fa i.FileStructureDisplay-module--markdown--c8083:before{color:#269ee9;content:"";font-family:octicons}.FileStructureDisplay-module--container--b74fa i.FileStructureDisplay-module--html--c811f:before{color:#e64c18;content:"";font-family:FontAwesome}.FileStructureDisplay-module--container--b74fa i.FileStructureDisplay-module--css--ed940:before{color:#46788d;content:"";font-family:FontAwesome}.FileStructureDisplay-module--container--b74fa i.FileStructureDisplay-module--npm--0e14f:before{color:#cc3534;content:"";font-family:file-icons}.FileStructureDisplay-module--container--b74fa i.FileStructureDisplay-module--arrow--796c8:before{color:#888;content:"";font-family:octicons}.FileStructureDisplay-module--container--b74fa i.FileStructureDisplay-module--folderIcon--49790:before{color:#fff;content:"";font-family:octicons}.FileStructureDisplay-module--container--b74fa i:before{-webkit-font-smoothing:antialiased;font-size:1em;font-style:normal;font-weight:400;height:1em;width:1em}@media screen and (min-width:980px){.TableOfContent-module--grid--80218{display:grid;height:100vh;left:20px;max-width:calc(35vw - 25px);place-content:center;position:fixed;top:0}}@media screen and (min-width:1100px){.TableOfContent-module--grid--80218{left:30px;max-width:calc(30vw - 30px)}}@media screen and (min-width:1400px){.TableOfContent-module--grid--80218{left:100px;max-width:calc(30vw - 100px)}}.TableOfContent-module--grid--80218 .TableOfContent-module--container--85bc4{max-height:calc(80vh - 40px);position:static}@media screen and (min-width:980px){.TableOfContent-module--grid--80218 .TableOfContent-module--container--85bc4{height:min-content;max-height:calc(90vh - 140px);overflow-x:hidden;overflow-y:scroll}}.TableOfContent-module--link--ad54b{box-sizing:border-box;color:#848484;column-gap:12px;font-family:Lexend,sans-serif;text-decoration:none;text-transform:uppercase;white-space:wrap;width:100%}.TableOfContent-module--link--ad54b.TableOfContent-module--highlight--5a003,.TableOfContent-module--link--ad54b:active,.TableOfContent-module--link--ad54b:hover{color:var(--accent)}li:last-child{margin-bottom:0}a.LinkRenderer-module--container--7e4c7:any-link{color:var(--accent-alt);font-weight:700;transition:color .25s}a.LinkRenderer-module--container--7e4c7:any-link:hover{color:var(--accent)}img{border-radius:4px;overflow:hidden;width:100%}.MarkdownRenderer-module--list-item__indent--bf269{padding-left:40px}ol>a,ul>a{text-decoration:none}p.MarkdownRenderer-module--p--c3f17{font-family:Mukta;font-size:1.2em;line-height:1.8em;margin:20px 0;padding:0 8px}.MarkdownRenderer-module--li--ff148{list-style:disc;margin:4px 32px;padding:4px 8px}.MarkdownRenderer-module--li--ff148 span{color:var(--accent);transition:color .5s}.MarkdownRenderer-module--li--ff148 span.MarkdownRenderer-module--text--df54e{border-bottom:2px solid hsla(0,87%,73%,.267);color:inherit;padding-bottom:3px;transition:border-color .35s}.MarkdownRenderer-module--li--ff148:hover>span{color:var(--accent-alt)}.MarkdownRenderer-module--li--ff148:hover>span.MarkdownRenderer-module--text--df54e{border-color:var(--accent-alt)}.MarkdownRenderer-module--italicize--c02fa{font-size:1.1rem;font-style:italic}.MarkdownRenderer-module--table--8292c{max-width:100%;overflow-y:scroll}pre{white-space:break-spaces}.MarkdownRenderer-module--blockquote--a8a72{background-color:var(--bg-card);font-size:.9em;padding:20px 40px;transition:background-color .35s}.MarkdownRenderer-module--bolded--9e794{color:var(--accent);font-weight:700}.HeaderRenderer-module--header--c2e07{color:var(--accent);font-family:Raleway,sans-serif;font-weight:700}.HeaderRenderer-module--invisible--4d7eb{opacity:0}.HeaderRenderer-module--article--34899{transform:translateY(-60%)}.HeaderRenderer-module--article--34899 a:visited{color:var(--accent-alt)}.HeaderRenderer-module--article--34899 h1.HeaderRenderer-module--header--c2e07{color:#dbafff;font-size:4rem;padding-bottom:20px}@media screen and (max-width:800px){.HeaderRenderer-module--article--34899 h1.HeaderRenderer-module--header--c2e07{font-size:2.3rem}}@media screen and (max-width:1400px){.HeaderRenderer-module--article--34899 h1.HeaderRenderer-module--header--c2e07{font-size:3rem}}h2.HeaderRenderer-module--header--c2e07,h3.HeaderRenderer-module--header--c2e07{background-color:var(--background);position:sticky;z-index:10}h2.HeaderRenderer-module--header--c2e07{font-size:2rem;padding:80px 8px calc(15px + 1.4rem);top:0}h3.HeaderRenderer-module--header--c2e07{color:var(--accent-alt);font-size:1.4rem;padding:0 8px 15px;top:calc(90px + 2rem)}h4.HeaderRenderer-module--header--c2e07{font-size:1.5rem;padding:20px 8px}body{background-color:var(--background);color:var(--text);font-family:Nunito,sans-serif;line-height:1.8em;overflow-x:hidden;transition:background-color .25s,color .25s;width:100vw}@font-face{font-family:Hyperwave;src:url(/static/Hyperwave-Two-cd251d4ab3e5698f9204ebc3a4e33edd.ttf)}@font-face{font-family:Poppins;font-weight:400;src:url(/static/Poppins-Regular-ccfdd78d095fe3607726da612d40597a.ttf)}@font-face{font-family:Poppins;font-weight:800;src:url(/static/Poppins-ExtraBold-2156e69bc095ee0ad41dce95d120b70d.ttf)}@font-face{font-family:FontAwesome;font-style:normal;font-weight:400;src:url(/static/fontawesome-20fd1704ea223900efa9fd4e869efb08.woff2)}@font-face{font-family:Mfizz;font-style:normal;font-weight:400;src:url(/static/mfixx-46a15ecd510899b0d8c6e9ffba54cc80.woff2)}@font-face{font-family:Devicons;font-style:normal;font-weight:400;src:url(/static/devopicons-fa189996e7cd9092d70538417f4b2daf.woff2)}@font-face{font-family:file-icons;font-style:normal;font-weight:400;src:url(/static/file-icons-2f64b833219dc8433424fffb32b977cf.woff2)}@font-face{font-family:octicons;font-style:normal;font-weight:400;src:url(/static/octicons-62bac4fc6794f79e300d1d39eebd1fe5.woff2)}html{box-sizing:border-box}a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{border:0;font-size:100%;font:inherit;margin:0;padding:0;vertical-align:baseline}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-touch-callout:none;font-display:fallback;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif}code{font-family:source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace}article,aside,details,figcaption,figure,footer,header,hgroup,menu,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}table{border-collapse:collapse;border-spacing:0}:root{--background:#141617;--card:#242627;--text:#eee;--accent:#c19ae0;--accent-alt:#ffa4a4}.cm-editor{outline:none}.SelectedNodeDetails-module--container--d1850{display:grid;gap:20px;grid-template-rows:1fr 50px;height:100%}.SelectedNodeDetails-module--container--d1850 .SelectedNodeDetails-module--inner--f2a55{color:#fff;display:grid;gap:20px;height:min-content}.SelectedNodeDetails-module--container--d1850 .SelectedNodeDetails-module--inner--f2a55 h2.SelectedNodeDetails-module--title--5b0be{color:var(--accent);font-size:2em;font-weight:700}.SelectedNodeDetails-module--container--d1850 ul li{list-style-type:disc;margin:10px 0 10px 20px}.SelectedNodeDetails-module--container--d1850 ul li a{color:#ccc;text-decoration:none;transition:color .25s}.SelectedNodeDetails-module--container--d1850 ul li a:visited{color:#888}.SelectedNodeDetails-module--container--d1850 ul li a:hover{color:#fff;text-decoration:underline}.SelectedNodeDetails-module--container--d1850 a.SelectedNodeDetails-module--cta--ecf59{background-color:var(--accent);border-radius:2px;color:#000;display:grid;font-weight:700;place-content:center;text-decoration:none;transition:filter .25s}.SelectedNodeDetails-module--container--d1850 a.SelectedNodeDetails-module--cta--ecf59:hover{filter:brightness(.8)}.Explore-module--container--46615{background-color:#141617;height:100vh;width:100vw}.Explore-module--container--46615 .Explore-module--graph--4f9a5{height:100%;position:relative;width:100%}.Explore-module--container--46615 .Explore-module--details--92224{background-color:#242627;border-radius:4px;bottom:18px;box-sizing:border-box;color:#aaa;height:calc(100vh - 96px);padding:30px;position:absolute;right:18px;width:min(40vw,400px)}.Explore-module--container--46615 .Explore-module--details--92224 h2{color:#fff}.Home-module--container--7115a{padding:80px}.Home-module--container--7115a>.Home-module--hero--d6e55{bottom:80px;position:absolute}.Home-module--container--7115a>.Home-module--hero--d6e55 h1{color:var(--accent);font-family:Passion One,cursive;font-size:13vw;line-height:.8em;margin:0;-webkit-user-select:none;user-select:none}.Home-module--container--7115a>.Home-module--explore--10606{border-bottom:4px solid transparent;cursor:pointer;font-family:Lexend;font-size:30px;position:absolute;right:20vw;top:50vh;transform:translate3d(-50%,-50%);transition:border-color .25s}.Home-module--container--7115a>.Home-module--explore--10606:hover{border-bottom-color:var(--accent)}.Article-module--container--9ecfc{display:grid;grid-template-columns:1fr auto;margin:0 auto}@media screen and (max-width:800px){.Article-module--container--9ecfc{font-size:1rem;padding:100px 0}}.Article-module--container--9ecfc .Article-module--article--f8334{box-sizing:border-box;grid-column:2/3;padding:140px 10px;width:100vw}@media screen and (min-width:980px){.Article-module--container--9ecfc .Article-module--article--f8334{padding:200px 20px;width:65vw}}@media screen and (min-width:1100px){.Article-module--container--9ecfc .Article-module--article--f8334{padding:50vh 30px}}@media screen and (min-width:1400px){.Article-module--container--9ecfc .Article-module--article--f8334{left:100px;padding:50vh 80px;width:70vw}}.Lab-module--container--5c76e{padding-top:80px}.Tutorial-module--container--75e35{display:grid;grid-template-columns:1fr auto;margin:0 auto}@media screen and (max-width:800px){.Tutorial-module--container--75e35{font-size:1rem;padding:100px 0}}.Tutorial-module--container--75e35 .Tutorial-module--article--23e81{box-sizing:border-box;grid-column:2/3;padding:140px 10px;width:100vw}@media screen and (min-width:980px){.Tutorial-module--container--75e35 .Tutorial-module--article--23e81{padding:200px 20px;width:65vw}}@media screen and (min-width:1100px){.Tutorial-module--container--75e35 .Tutorial-module--article--23e81{padding:50vh 30px}}@media screen and (min-width:1400px){.Tutorial-module--container--75e35 .Tutorial-module--article--23e81{left:100px;padding:50vh 80px;width:70vw}}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true">Designing a URL shortener</title><link data-react-helmet="true" href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro" rel="stylesheet"/><link data-react-helmet="true" href="https://fonts.googleapis.com/css?family=B612+Mono" rel="stylesheet"/><link data-react-helmet="true" href="https://fonts.googleapis.com/css2?family=Lexend:wght@800&amp;display=swap" rel="stylesheet"/><link data-react-helmet="true" href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;800" rel="stylesheet"/><link data-react-helmet="true" href="https://fonts.googleapis.com/css2?family=Nunito" rel="stylesheet"/><link data-react-helmet="true" href="https://fonts.googleapis.com/css2?family=Mukta:wght@300;400;600;800" rel="stylesheet"/><script data-react-helmet="true" defer="" data-domain="learn.ryqn.dev" src="https://plausible.io/js/plausible.js"></script><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><link rel="icon" href="/favicon-32x32.png?v=68f1c1b12887135b17b7efef9628f557" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=68f1c1b12887135b17b7efef9628f557"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=68f1c1b12887135b17b7efef9628f557"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=68f1c1b12887135b17b7efef9628f557"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=68f1c1b12887135b17b7efef9628f557"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=68f1c1b12887135b17b7efef9628f557"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=68f1c1b12887135b17b7efef9628f557"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=68f1c1b12887135b17b7efef9628f557"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=68f1c1b12887135b17b7efef9628f557"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><nav class="Navigation-module--container--4c213"><a class="Navigation-module--home--601ca" href="/"><img src="/static/logo-8975a2271f16d33d44da657b65db6bc6.png"/><h2 class="Navigation-module--title--f2a25">learn.ryqn.dev</h2></a><div class="Navigation-module--tabs--cc9a3"><a class="Navigation-module--tab--747d2" href="/explore">Explore</a></div><div class="Search-module--container--ca5e5"><div class="Search-module--backdrop--0af50"></div><div class="Search-module--wrapper--b97dd"><input id="search" class="Search-module--input--18232" type="text" placeholder="Search..." autoComplete="off" value=""/><label for="search" class="Search-module--label--7bcf1"><svg class="Search-module--icon--ed59d" viewBox="0 0 48 48" for="search" height="48" width="48"><path d="M38.7 41.25 26.85 29.4q-1.55 1.3-3.65 2-2.1.7-4.35.7-5.7 0-9.6-3.9-3.9-3.9-3.9-9.5t3.9-9.5q3.9-3.9 9.5-3.9t9.5 3.9q3.9 3.9 3.9 9.5 0 2.2-.675 4.225Q30.8 24.95 29.4 26.75l12 11.9q.55.55.55 1.3t-.6 1.3q-.55.55-1.325.55-.775 0-1.325-.55Zm-19.9-12.8q4.05 0 6.875-2.85t2.825-6.9q0-4.05-2.825-6.9Q22.85 8.95 18.8 8.95q-4.15 0-6.975 2.85Q9 14.65 9 18.7q0 4.05 2.825 6.9 2.825 2.85 6.975 2.85Z"></path></svg></label><div class="Search-module--results--626aa" tabindex="0"><div class="Tooltip-module--container--2145e"><svg class="Tooltip-module--icon--67419" viewBox="0 0 48 48" height="48" width="48"><path d="M13.1 29.65q-.45-.45-.475-1.05-.025-.6.425-1.05l9.9-9.9q.25-.25.5-.35.25-.1.55-.1.3 0 .55.1.25.1.5.35l9.9 9.85q.45.4.45 1.025 0 .625-.45 1.075-.45.45-1.075.45T32.8 29.6L24 20.85l-8.8 8.85q-.4.45-1.025.425-.625-.025-1.075-.475Z"></path></svg><svg class="Tooltip-module--icon--67419" viewBox="0 0 48 48" height="48" width="48"><path d="M24 30.15q-.3 0-.55-.1-.25-.1-.5-.35l-9.9-9.9q-.4-.4-.375-1.075.025-.675.425-1.075.5-.5 1.075-.425.575.075 1.025.475l8.8 8.8 8.8-8.8q.4-.4 1.075-.45.675-.05 1.075.45.5.4.425 1.05-.075.65-.475 1.1l-9.85 9.85q-.25.25-.5.35-.25.1-.55.1Z"></path></svg><p>Move Up / Down</p><div></div><div></div><svg class="Tooltip-module--icon--67419" viewBox="0 0 48 48" height="48" width="48"><path d="m16.9 34.9-9.8-9.8q-.25-.25-.35-.525-.1-.275-.1-.525 0-.3.1-.55.1-.25.35-.5l9.8-9.8q.45-.45 1.1-.475.65-.025 1.1.425.45.45.45 1.075T19.1 15.3l-7.3 7.3H39v-7.1q0-.65.425-1.075Q39.85 14 40.5 14q.65 0 1.075.425Q42 14.85 42 15.5v8.55q0 .65-.425 1.075-.425.425-1.075.425H11.85l7.25 7.25q.45.45.45 1.05 0 .6-.45 1.05-.45.45-1.1.45-.65 0-1.1-.45Z"></path></svg><p>Open Link</p></div><div class="Search-module--overflow--978da"><div class="Result-module--container--6e44c"><h3 class="Result-module--title--be552">No Results Found</h3></div></div></div></div></div></nav><div><div class="Article-module--container--9ecfc"><article class="Article-module--article--f8334"><header class="HeaderRenderer-module--article--34899"><h1 class="HeaderRenderer-module--header--c2e07" id="designing-a-url-shortener">Designing a URL shortener</h1><p>by<!-- --> <a href="https://ryqn.dev/" target="_blank" rel="noopener noreferrer">Ryan Yang</a></p></header>
<pre><div class="TableOfContent-module--grid--80218"><div class="TableOfContent-module--container--85bc4"><ul style="padding-left:32px;list-style:disc">
<li><a class="TableOfContent-module--link--ad54b TableOfContent-module--highlight--5a003" href="/article/designing-a-url-shortener#intro">Intro</a></li>
<li><a class="TableOfContent-module--link--ad54b TableOfContent-module--highlight--5a003" href="/article/designing-a-url-shortener#what-is-a-url-shortener">What is a URL shortener?</a></li>
<li><a class="TableOfContent-module--link--ad54b TableOfContent-module--highlight--5a003" href="/article/designing-a-url-shortener#why-would-i-use-a-url-shortener">Why would I use a URL shortener</a></li>
<li><a class="TableOfContent-module--link--ad54b TableOfContent-module--highlight--5a003" href="/article/designing-a-url-shortener#examples-of-url-shorteners">Examples of URL shorteners</a></li>
<li><a class="TableOfContent-module--link--ad54b TableOfContent-module--highlight--5a003" href="/article/designing-a-url-shortener#designing-our-system">Designing our system</a>
<ol style="padding-left:32px;list-style:decimal">
<li><a class="TableOfContent-module--link--ad54b TableOfContent-module--highlight--5a003" href="/article/designing-a-url-shortener#core-concept">Core concept</a></li>
<li><a class="TableOfContent-module--link--ad54b TableOfContent-module--highlight--5a003" href="/article/designing-a-url-shortener#data-storage">Data storage</a></li>
<li><a class="TableOfContent-module--link--ad54b TableOfContent-module--highlight--5a003" href="/article/designing-a-url-shortener#implementing-redirection">Implementing redirection</a></li>
<li><a class="TableOfContent-module--link--ad54b TableOfContent-module--highlight--5a003" href="/article/designing-a-url-shortener#response-codes">Response codes</a></li>
<li><a class="TableOfContent-module--link--ad54b TableOfContent-module--highlight--5a003" href="/article/designing-a-url-shortener#user-interface">User Interface</a></li>
<li><a class="TableOfContent-module--link--ad54b TableOfContent-module--highlight--5a003" href="/article/designing-a-url-shortener#design-decisions">Design decisions</a></li>
</ol>
</li>
<li><a class="TableOfContent-module--link--ad54b TableOfContent-module--highlight--5a003" href="/article/designing-a-url-shortener#putting-it-all-together">Putting it all together</a></li>
</ul></div></div></pre>
<h2 class="HeaderRenderer-module--invisible--4d7eb" id="intro">Intro</h2><h2 class="HeaderRenderer-module--header--c2e07" id="intro-visible">Intro</h2>
<p class="MarkdownRenderer-module--p--c3f17">This is a part of a series of design docs for different types of applications. Each of these design docs will (hopefully) have tutorials on how to implement them in various languages. The point of these are not to write a production-ready application but provide some direction on how to develop certain apps. This means that the best or most efficient solution may not always be provided - but rather, the one that gets the job done without significant drawbacks.</p>
<p class="MarkdownRenderer-module--p--c3f17">This design has 1 supported language, found here:
<a class="LinkRenderer-module--container--7e4c7" href="https://learn.ryqn.dev/tutorial/making-a-url-shortener/python" target="_blank" rel="noopener noreferrer">Making a URL Shortener in Python (Flask)</a></p>
<h2 class="HeaderRenderer-module--invisible--4d7eb" id="what-is-a-url-shortener">What is a URL shortener?</h2><h2 class="HeaderRenderer-module--header--c2e07" id="what-is-a-url-shortener-visible">What is a URL shortener?</h2>
<p class="MarkdownRenderer-module--p--c3f17">A URL shortener is a service that converts your long URL into a shorter one. For example, the link to this article is <a class="LinkRenderer-module--container--7e4c7" href="https://learn.ryqn.dev/designing-a-url-shortener#what-is-a-url-shortener?" target="_blank" rel="noopener noreferrer">https://learn.ryqn.dev/designing-a-url-shortener#what-is-a-url-shortener?</a> which is 72 characters. When I use a url shortening service, it becomes <a class="LinkRenderer-module--container--7e4c7" href="https://tinyurl.com/yckw7tcs" target="_blank" rel="noopener noreferrer">https://tinyurl.com/yckw7tcs</a> - a total of 28 characters.</p>
<p class="MarkdownRenderer-module--p--c3f17"><img src="./assets/tinyurl-example.png" alt="Using a URL shortener example"/></p>
<h2 class="HeaderRenderer-module--invisible--4d7eb" id="why-would-i-use-a-url-shortener">Why would I use a URL shortener?</h2><h2 class="HeaderRenderer-module--header--c2e07" id="why-would-i-use-a-url-shortener-visible">Why would I use a URL shortener?</h2>
<p class="MarkdownRenderer-module--p--c3f17">Regardless of what device you&#x27;re on, typing the second link listed above is infinitely faster than typing the first one. This is the main benefit of URL shorteners: <strong class="MarkdownRenderer-module--bolded--9e794">convenience</strong>. This benefit is immediately apparent when someone needs to manually input your link. A good use case to have URL shorteners in this case are on physical mediums, like posters and magazines, and intangible digital mediums, like screenshared presentations and unhighlightable text (for whatever reason).</p>
<p class="MarkdownRenderer-module--p--c3f17">Short links also benefit from being easier to design around (less space, more creative freedom) and also tend to look more professional.</p>
<p class="MarkdownRenderer-module--p--c3f17">Another hidden (no pun intended) benefit is that the actual link location is disguised behind the shortened URL. This is usually used for nefarious reasons but could potentially be helpful in some cases. For example, you could lead users to <strong class="MarkdownRenderer-module--bolded--9e794">verybadmaliciouswebsite.com</strong> but all they&#x27;ll see is <a class="LinkRenderer-module--container--7e4c7" href="https://tinyurl.com/yckw7ts" target="_blank" rel="noopener noreferrer">https://tinyurl.com/yckw7ts</a>.</p>
<p class="MarkdownRenderer-module--p--c3f17">URL shorteners today usually provide high-level insights and analytics that paid users can use to understand which of their links are providing the most value. For example, you can have 2 different shortened links that go to the same original link but one of them is placed on physical posters in Canada, and another one is placed on physical posters in Mexico. When you notice that the link based in Canada locations have more traction, you may want to invest more in that area.</p>
<h2 class="HeaderRenderer-module--invisible--4d7eb" id="examples-of-url-shorteners">Examples of URL shorteners</h2><h2 class="HeaderRenderer-module--header--c2e07" id="examples-of-url-shorteners-visible">Examples of URL shorteners</h2>
<p class="MarkdownRenderer-module--p--c3f17"><a class="LinkRenderer-module--container--7e4c7" href="https://bit.ly" target="_blank" rel="noopener noreferrer">Bit.ly</a> <br/>
<a class="LinkRenderer-module--container--7e4c7" href="https://tinyURL.com" target="_blank" rel="noopener noreferrer">TinyURL</a></p>
<p class="MarkdownRenderer-module--p--c3f17">You can play around with some of these URL shorteners to see what they&#x27;re supposed to do but this idea is pretty simple and most people probably don&#x27;t need to read the first couple paragraphs if they&#x27;ve used the internet at least 4 times in their life.</p>
<h2 class="HeaderRenderer-module--invisible--4d7eb" id="designing-our-system">Designing our system</h2><h2 class="HeaderRenderer-module--header--c2e07" id="designing-our-system-visible">Designing our system</h2>
<h3 class="HeaderRenderer-module--invisible--4d7eb" id="core-concept">Core concept</h3><h3 class="HeaderRenderer-module--header--c2e07" id="core-concept-visible">Core concept</h3>
<p class="MarkdownRenderer-module--p--c3f17">The core concept here is <strong class="MarkdownRenderer-module--bolded--9e794">redirection</strong>. When someone accesses our short link, we need to redirect them to the original link. Since every alias has a corresponding long link, <strong class="MarkdownRenderer-module--bolded--9e794">we will need to store a mapping that maps <!-- -->[alias -&gt; long link]</strong>. A lot of these.</p>
<h3 class="HeaderRenderer-module--invisible--4d7eb" id="data-storage">Data storage</h3><h3 class="HeaderRenderer-module--header--c2e07" id="data-storage-visible">Data storage</h3>
<p class="MarkdownRenderer-module--p--c3f17"><strong class="MarkdownRenderer-module--bolded--9e794">tl;dr for this section</strong> Databases are important, but we can store in memory for purposes of making this tutorial short</p>
<p class="MarkdownRenderer-module--p--c3f17">When a need arises to store large amounts of structured data, it&#x27;s usually a sign that your application will need to reach for a database. Database management is often an entire job all by itself and implementing a database is an additional system you would have to manage. With that in mind, we&#x27;re going to hold off on adding a database and just store all of our data in memory - which is perfectly fine for developing a POC (proof-of-concept).</p>
<p class="MarkdownRenderer-module--p--c3f17">If I wanted to implement a database anyways, I would first develop the system without it, make sure the core functionality works, and then swap out the data access and storage code with database code. That way, I can focus on just learning how databases work without having to debug the main system.</p>
<h3 class="HeaderRenderer-module--invisible--4d7eb" id="implementing-redirection">Implementing redirection</h3><h3 class="HeaderRenderer-module--header--c2e07" id="implementing-redirection-visible">Implementing redirection</h3>
<p class="MarkdownRenderer-module--p--c3f17"><strong class="MarkdownRenderer-module--bolded--9e794">tl;dr for this section</strong> We will use a webserver that responds with 3XX redirection http codes</p>
<p class="MarkdownRenderer-module--p--c3f17">Okay, assuming I figured out how to store my data, how do I do redirection? Well, we know that in order to use our service, users have to go to our shortened URL in the browser, which will then redirect them somewhere else.</p>
<p class="MarkdownRenderer-module--p--c3f17">So does that mean I have to create a website? Let&#x27;s explore how that would work. We would have a website at (let&#x27;s imagine our website is hosted at <a class="LinkRenderer-module--container--7e4c7" href="https://short.com" target="_blank" rel="noopener noreferrer">https://short.com</a> - this url is fake. pls don&#x27;t use) <!-- -->short.com<!-- -->. When someone goes on a short link, for example <a class="LinkRenderer-module--container--7e4c7" href="https://short.com/yckw7ts" target="_blank" rel="noopener noreferrer">https://short.com/yckw7ts</a>, our website would have to take that unique id: <!-- -->yckw7ts<!-- --> and then send that data to our database to obtain the mapping, and then once it gets the data back, it&#x27;ll redirect to the correct location.</p>
<p class="MarkdownRenderer-module--p--c3f17">This solution... works! It&#x27;s a perfectly fine implementation of a url shortener service and this is what a time sequence diagram would look like:</p>
<p class="MarkdownRenderer-module--p--c3f17"><img src="./assets/client-rendered-diagram.png" alt="Time sequence diagram of client executed redirection"/></p>
<p class="MarkdownRenderer-module--p--c3f17">This solution solves the problem through Client-Side Rendering (CSR) in which the client does all of the processing. Notice how after we make the initial request to <!-- -->https://short.com/yckw7ts<!-- -->, the browser has to extract the url, open a connection to the database, query the value, and then once it gets the data back, it&#x27;ll redirect to the webpage. If we implement this solution, it&#x27;ll get the job done but there&#x27;s alot of extra steps being performed here - and the effects will be somewhat noticable to the end user.</p>
<p class="MarkdownRenderer-module--p--c3f17">We can, instead, upgrade our web server from a <strong class="MarkdownRenderer-module--bolded--9e794">static web server</strong> to a <strong class="MarkdownRenderer-module--bolded--9e794">web application server</strong>. The difference is that in addition to hosting and serving static assets (like HTML/CSS/JS/images), a web application server can also execute code and programming logic. More importantly, it can make use of the various HTTP response codes available. It&#x27;ll look like this:</p>
<p class="MarkdownRenderer-module--p--c3f17"><img src="./assets/redirection-diagram.png" alt="Time sequence diagram of web application server redirection through http codes"/></p>
<h3 class="HeaderRenderer-module--invisible--4d7eb" id="response-codes">Response codes</h3><h3 class="HeaderRenderer-module--header--c2e07" id="response-codes-visible">Response codes</h3>
<p class="MarkdownRenderer-module--p--c3f17">You can learn about HTTP response codes <a class="LinkRenderer-module--container--7e4c7" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Redirections" target="_blank" rel="noopener noreferrer">here</a> but the gist of it is that when we send the browser a response with a 3XX code, it will redirect to the URL specified in that response.</p>
<h3 class="HeaderRenderer-module--invisible--4d7eb" id="user-interface">User Interface</h3><h3 class="HeaderRenderer-module--header--c2e07" id="user-interface-visible">User Interface</h3>
<p class="MarkdownRenderer-module--p--c3f17"><strong class="MarkdownRenderer-module--bolded--9e794">tl;dr for this section</strong> we will need to create a website that has a text box and a submit button; after submitting their link, we will display to them the aliased link.</p>
<p class="MarkdownRenderer-module--p--c3f17">When we&#x27;re talking about designing a user interface, we&#x27;re asking how should users interact with our service. To answer this, we need to think of all the types of users we&#x27;ll have, and for this application, we have 2. The first type is the user that will eventually click on the short link we generate. This type of user pretty much doesn&#x27;t interact with our service at all. They type in our short link and we&#x27;ll redirect them to the place they&#x27;re supposed to go. They will only ever know about our service through the text in the link we provide.</p>
<p class="MarkdownRenderer-module--p--c3f17">The other type of user is a creator. This type of user is the one who will utilize our service to create a short link and for these people, we will need to design some type of user interface in which creators will be able to input their long link and submit it to us. Then, we need to display to them the generated short link.</p>
<p class="MarkdownRenderer-module--p--c3f17">Web development, like databases, is a part of a much larger ecosystem and should be learned separately. In all code implementations, I will provide to you the code for the website and try to explain <span class="italicize">just</span> enough for you to get by so you don&#x27;t have to worry about too much all at once.</p>
<h3 class="HeaderRenderer-module--invisible--4d7eb" id="the-actual-algorithms">The actual algorithms</h3><h3 class="HeaderRenderer-module--header--c2e07" id="the-actual-algorithms-visible">The actual algorithms</h3>
<p class="MarkdownRenderer-module--p--c3f17">How do we generate short links and access the long link given the short link. We will generate a random alphanumeric string of length 6 (if the random string has already been used, we can loop until it finds a valid string) and append it to the end of our server url. As for data access, we can store our <!-- -->&lt;short link, long link&gt;<!-- --> pair in a map. Maps are an extremely important data structure in computer science as they allow you to get a value given a key in O(1) time. If that was still confusing to you (probably is), you&#x27;re likely more familiar with the actual implementations of maps in various languages:</p>
<p class="MarkdownRenderer-module--p--c3f17"><strong class="MarkdownRenderer-module--bolded--9e794">Python</strong>: dictionary <br/>
<strong class="MarkdownRenderer-module--bolded--9e794">Javascript</strong>: JSON objects <br/>
<strong class="MarkdownRenderer-module--bolded--9e794">Java</strong>: HashMap, TreeMap (not O(1) but same concept) <br/>
<strong class="MarkdownRenderer-module--bolded--9e794">C++</strong>: std::map</p>
<h3 class="HeaderRenderer-module--invisible--4d7eb" id="design-decisions">Design decisions</h3><h3 class="HeaderRenderer-module--header--c2e07" id="design-decisions-visible">Design decisions</h3>
<h4 class="HeaderRenderer-module--invisible--4d7eb" id="choosing-a-length-of-random-string">Choosing a length of random string</h4><h4 class="HeaderRenderer-module--header--c2e07" id="choosing-a-length-of-random-string-visible">Choosing a length of random string</h4>
<p class="MarkdownRenderer-module--p--c3f17"><strong class="MarkdownRenderer-module--bolded--9e794">tl;dr for this section</strong> Need something short to type, but long to have enough combinations</p>
<p class="MarkdownRenderer-module--p--c3f17">First thing you might ask is how did I pick the magic number 6 seemingly out of nowhere for the length of the generated string? We need to keep in mind the point of our service: <strong class="MarkdownRenderer-module--bolded--9e794">to keep urls short</strong>. This means that the random alias id we append to the end of our short url should be as short as possible. However, the shorter our generated id is, the less combinations possible, resulting in higher collisions and an upper limit to aliases we can make.</p>
<p class="MarkdownRenderer-module--p--c3f17">The way to find our magic number requires a little bit of math and good understanding of our random number algorithm. URL&#x27;s are case sensitive - meaning that an uppercase &#x27;A&#x27; is different from a lower case &#x27;a&#x27;. This allows our alphanumeric string to have 62 different characters: [A-Z] + [a-z] + [0-9] (also known as Base62). Since every character has 62 options, we can calculate the total number of combinations like so:</p>
<p class="MarkdownRenderer-module--p--c3f17">Total Combinations = 62^(Length of string)</p>
<p class="MarkdownRenderer-module--p--c3f17">If our alias was only two characters long, our users would be very happy because they would only need to type out <a class="LinkRenderer-module--container--7e4c7" href="https://short.com/j5" target="_blank" rel="noopener noreferrer">https://short.com/j5</a>, but we would only support 4096 aliases. If our alias was 20 characters long, our users would have to type <a class="LinkRenderer-module--container--7e4c7" href="https://short.com/f7sj4fvm3js9fjlzpqru" target="_blank" rel="noopener noreferrer">https://short.com/f7sj4fvm3js9fjlzpqru</a>, but we could support 1.329228 * 10^36 different aliases. So, <strong class="MarkdownRenderer-module--bolded--9e794">we want to have the shortest alias possible - making it easy for users to type - while supporting enough aliases for our service to be useful</strong>.</p>
<p class="MarkdownRenderer-module--p--c3f17">How do I pick a good number of aliases to support? Look at your use case. If you work for Youtube, for example, and you&#x27;re generating unique ids for youtube links, you would probably want to look at the current number of Youtube videos and the rate at which Youtube videos get posted. Then you can plan for, say, 10 years of service and derive a safe number from that.</p>
<p class="MarkdownRenderer-module--p--c3f17">In our case, 6 characters gives us 68,719,476,736 different combinations - a safe number I think for our application while being short enough for users.</p>
<h4 class="HeaderRenderer-module--invisible--4d7eb" id="random-number-generator-infinite-loop">Random number generator infinite loop</h4><h4 class="HeaderRenderer-module--header--c2e07" id="random-number-generator-infinite-loop-visible">Random number generator infinite loop</h4>
<p class="MarkdownRenderer-module--p--c3f17"><strong class="MarkdownRenderer-module--bolded--9e794">tl;dr for this section</strong> Random number generation is problematic, but not worth using a more complex solution as it&#x27;s not in scope of this article</p>
<p class="MarkdownRenderer-module--p--c3f17">How about our random string generator function? There exists a case where our random number generator gets unlucky or we have too many urls generated already where the loop iterates multiple times before finding a valid id. You may want to catch this case by returning an error after looping too many times, or maybe even replace the last accessed alias, etc. I chose not to address this edge case because of how complex a good solution may be and might detract from the main message here. I do think it would be good practice to implement your own system to check this error, though.</p>
<p class="MarkdownRenderer-module--p--c3f17">If your service doesn&#x27;t guarantee permanence, you could maybe attach a timestamp value to the link_mappings that keeps track of the last time the alias was used, and after 5 loops - query the oldest timestamp value and replace that id. Just an idea and it&#x27;s up to you to debate the pros and cons of this solution.</p>
<h2 class="HeaderRenderer-module--invisible--4d7eb" id="putting-it-all-together">Putting it all together</h2><h2 class="HeaderRenderer-module--header--c2e07" id="putting-it-all-together-visible">Putting it all together</h2>
<p class="MarkdownRenderer-module--p--c3f17">Phew! Yes I just said &#x27;Phew&#x27; unironically. Fight me. Anyways, that was a lot of brainstorming and if you&#x27;ve made it to this point, we can finally start designing the system we want to implement. So, what do we need?</p>
<p class="MarkdownRenderer-module--p--c3f17">We need a web server that can respond to requests dynamically and return redirection responses. <br/>
<!-- -->We also need the web server to serve websites that a user can use to send us data. <br/>
<!-- -->We need to generate aliases and store the pair of links in our database (except our database will just be in memory and not use a dedicated system)</p>
<p class="MarkdownRenderer-module--p--c3f17">I&#x27;m sorry that I made you read all that just to say we need a web server.</p>
<h2 class="HeaderRenderer-module--invisible--4d7eb" id="picking-how-to-implement-this">Picking how to implement this</h2><h2 class="HeaderRenderer-module--header--c2e07" id="picking-how-to-implement-this-visible">Picking how to implement this</h2>
<p class="MarkdownRenderer-module--p--c3f17">At this time, there&#x27;s only a Python implementation of this so <a class="LinkRenderer-module--container--7e4c7" href="https://learn.ryqn.dev/tutorial/making-a-url-shortener/python" target="_blank" rel="noopener noreferrer">this</a> is your only option if you want to do this with me!</p></article></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/article/designing-a-url-shortener";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-e53cc1720687cd57adae.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-f880a628f96ea03741eb.js\"],\"component---src-pages-explore-tsx\":[\"/component---src-pages-explore-tsx-f27a43e07b2bfe70e188.js\"],\"component---src-pages-home-index-tsx\":[\"/component---src-pages-home-index-tsx-1c0d1860022a5528b295.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-71fdcfc3de6aa2157a9a.js\"],\"component---src-pages-lab-index-tsx\":[\"/component---src-pages-lab-index-tsx-6e6afd041fab0e3df066.js\"],\"component---src-templates-article-index-tsx\":[\"/component---src-templates-article-index-tsx-352f6b5449624e1cb79d.js\"],\"component---src-templates-lab-index-tsx\":[\"/component---src-templates-lab-index-tsx-45aa5da51423135f6f22.js\"],\"component---src-templates-tutorial-index-tsx\":[\"/component---src-templates-tutorial-index-tsx-07d0ab44046596c8a461.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="c31d53f187ac3e22ec84";</script><script src="/webpack-runtime-803faeea87b4a61e0031.js" async></script><script src="/app-e53cc1720687cd57adae.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>