{"componentChunkName":"component---src-templates-article-index-tsx","path":"/articles/making-a-theme-switcher/","result":{"pageContext":{"link":"/making-a-theme-switcher","title":"Making a dark / light mode theme switcher","summary":"Learn how to setup a theme toggler with just CSS and Javascript. We'll be using CSS variables and utilizing Javascript functions to swap out styles. Then, we'll use Local Storage to save the theme and load it in future use.","tags":["HTML","CSS","JS","CSS Variables","LocalStorage","UI","frontend","web developement"],"date":{"updated":"Tue, 09 Feb 2021 17:33:38 GMT","uploaded":"Tue, 02 Feb 2021 14:16:25 GMT"},"content":"# Making a dark / light mode theme switcher\n\n*Note: This is not a complete guide on dark mode, but rather a quickstart for new developers to get a theme setup up and running in a small codebase. For a more in-depth analysis regarding dark modes, you can check out [this](https://ryanfeigenbaum.com/dark-mode/) amazing article  written by Ryan Feigenbaum.*\n\n## Table of Contents\n\n* [Intro](#intro)\n* [Why have a dark mode?](#why-have-a-dark-mode?)\n* [Implementing dark mode](#implementing-dark-mode)\n    1. [Starting code](#starting-code)\n    2. [Dark mode styles](#dark-mode-styles)\n* [CSS Variables](#css-variables)\n    1. [Applying CSS variables to our code](#applying-css-variables-to-our-code)\n    2. [Declaring CSS Variables](#declaring-css-variables)\n    3. [Using CSS Variables](#using-css-variables)\n* [Working with Javascript](#working-with-javascript)\n    1. [Dynamically changing our CSS Variables](#dynamically-changing-our-css-variables)\n    2. [Toggling](#toggling)\n    3. [Saving and loading themes](#saving-and-loading-themes)\n* [Finishing touches](#finishing-touches)\n* [Just the code](#just-the-code)\n    \n\n#### Intro\n\nFor people who have used their phones/computer in the dark, dark mode is one of the most coveted features around. Before we dive into how we can create a dark mode and toggle it, let's first take a look at what dark mode is. Dark mode is a design concept that utilizes light colors (usually white or pastel-like colors) for text and icons contrasted with a dark background, as opposed to the usual dark colored text on a light background (like a book or print newspaper). \n\n\n## Why have a dark mode?\n\nAside from dark mode looking cooler than light mode (personal and subjective preference, of course), dark mode can reduce eyestrain in low-light conditions. Ever surf the web on your phone at night and you visit a page that completely blinds you with white light? \n\nYou can see the end results below to get a feel for what dark mode looks like in case you're unfamiliar but without further ado, let's go ahead and implement it\n\n## Implementing dark mode\n#### Starting code\nImagine we have the following website without dark mode (a.k.a. light mode) that we want to add dark mode to:\n\n```file\n└── making-a-theme-switcher\n    ├── index.html\n    ├── styles.css\n    └── script.js\n```\n\n```html index.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <title>Dark Theme Switcher</title>\n    <link href=\"https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap\" rel=\"stylesheet\"> \n    <link rel=\"stylesheet\" type=\"text/css\" href=\"./style.css\" />\n    <script src=\"./script.js\"></script>\n  </head>\n  <body>\n    <div class=\"card\">\n      <h1>Ryan Yang</h1>\n      <hr />\n      <p>\n        I am a front-end developer who should be doing \n        work but is sidetracked playing Maplestory\n      </p>\n    </div>\n  </body>\n</html>\n```\n\nAnd we style it like this (light mode):\n\n```css style.css\n* {\n    margin: 0;\n}\n\nbody {\n    display: grid;\n    height: 100vh;\n    width: 100vw;\n    font-family: 'Josefin Sans', sans-serif;\n\n    /* here are the styles below we want to 'toggle' later */\n    background-color: white;\n    color: black;\n}\n\nhr {\n    margin: 15px 0px 20px;\n    color: #f0f;\n}\n\n.card {\n    place-self: center;\n    max-width: 300px;\n    padding: 30px 20px;\n    border-radius: 4px;\n    box-shadow: 0 0 5px black;\n\n    /* here are the styles below we want to 'toggle' later */\n    background-color: white;\n}\n```\n\n```javascript script.js\n// our javascript is empty.... for now!\n```\nWhen we test this code in the browser, we get something that looks like this:\n\n![Light mode look](./assets/light_mode.png)\n\n#### Dark mode styles\n\nIn this simple example, to convert our design into dark mode, we only need to swap a couple CSS styles. More specifically, we will be toggling the `background-color` and `color` properties only. Below are the values we will be swapping to but keep in mind that we can toggle ANY css property we want and are not just limited to color styles. (The `/* ... */` is a CSS comment which denotes that the content is left unchanged and not listed again to keep things short)\n\n```css style.css\n/* ... */\nbody {\n    /* ... */\n    background-color: #151515;\n    color: white;\n}\n/* ... */\n.card {\n    /* ... */\n    background-color: #15171A;\n}\n```\nSwapping these styles will result in something that looks like this:\n\n![Dark Mode Image](./assets/dark_mode.png)\n\n\n## CSS Variables\n\nThere are a couple ways to implement a dark mode but the way I'll be showing you is with CSS variables. So, how does it work?\n\n[CSS variables](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties) are essentially placeholders for values and you can update them with Javascript. They operate like variables in Javascript or any other programming language and when they get changed, the webpage will immediately respond and apply the new CSS styles, rerendering the webpage.\n\n#### Applying CSS variables to our code\n\nSince there are 3 things we want to toggle, we will only use 3 variables.\n\n\n| Elements that will change styles | Light Mode (color/hex code) | Dark Mode (color/hex code) |\n|----------------------------------|-----------------------------|----------------------------|\n| Background color of page         | white / #FFFFFF             | *dark grey / #151515       |\n| Background color of card item    | white / #FFFFFF             | *dark blue-grey / #15171A  |\n| Color of text                    | black / #000000             | white / #FFFFFF            |\n\n\\* - description of color, not actual CSS value\n\n\n#### Declaring CSS Variables\n\nFirst, we need to initialize the variables and give them a default value. We can define global variables in something called the root, which is a top-level CSS selector, denoted below:\n\n```css style.css\n:root {\n    --background: white;\n    --card-background: white;\n    --text-color: black;\n}\n/* ... */\n```\n\nOk. What the *heck* did we just do? Well, the general CSS syntax is still the same where we have our selector and a bunch of `[property]: [value];`'s for the selector. Our selector is `:root`, which is a level above `html` and so that allows us to use these variables from anywhere in our CSS code. (If you're comfortable with programming concepts, you can think of these as global variables.)\n\nWhat might not be familiar, however, are the properties for the selector. The `--` in front of the property lets our CSS know that we are declaring values for a CSS variable, not a CSS style. Everything after the `--` and before the `:` is our variable name. CSS variables are case sensitive and we use, by convention, a single dash, `-`, if our variable name has multiple words. \n\n#### Using CSS Variables\n\nNow that we initialized the CSS variables in our `:root`, we can use them where we need. Our CSS page will eventually look something like this:\n\n```css style.css\n:root {\n    --background: white;\n    --card-background: white;\n    --text-color: black;\n}\n/* ... */\nbody {\n    /* ... */\n    background-color: var(--background);\n    color: var(--text-color);\n}\n/* ... */\n.card {\n    /* ... */\n    background-color: var(--card-background);\n}\n```\n\nNotice, we simply replaced the value of the CSS style with the variable name. We use `var()` to let CSS know that the value we are applying is going to be a CSS variable, rather than an actual, hardcoded value.\n\n## Working with Javascript\n\n#### Dynamically changing our CSS Variables\n\nLet's recap what we've done so far. Instead of having hardcoded values in our CSS styles, we've now attached CSS variables to our styles and defined the *default* values in our `:root` selector. However, none of this gives us dark mode, nor does it allow us to toggle our styles yet. \n\nThe next question is, how do we now utilize our CSS variables and change them on the fly? Take a look:\n\n```javascript script.js\nfunction changeToDarkMode(){\n    document.documentElement.style.setProperty('--background', \"#151515\");\n    document.documentElement.style.setProperty('--card-background', \"#15171A\");\n    document.documentElement.style.setProperty('--text-color', \"white\");\n}\n```\n\nThe code above simply creates a function named `changeToDarkMode` and will target the `:root` styles (with `document.documentElement.style`) and individually set every variable to a new value. In this case, it will set the CSS variables we defined earlier that represent background colors to something darker and the text color to white.\n\nWe can, say, attach this function to a button in our HTML and when we click it, it will toggle our website into dark mode.\n\n```html index.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <title>Dark Theme Switcher</title>\n    <link href=\"https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap\" rel=\"stylesheet\"> \n    <link rel=\"stylesheet\" type=\"text/css\" href=\"./style.css\" />\n    <script src=\"./script.js\"></script>\n  </head>\n  <body>\n    <button onclick=\"changeToDarkMode();\">Click me to enable dark mode!</button>\n    <div class=\"card\">\n      <h1>Ryan Yang</h1>\n      <hr />\n      <p>\n        I am a front-end developer who should be doing \n        work but is sidetracked playing Maplestory\n      </p>\n    </div>\n  </body>\n</html>\n```\n```css style.css\n:root {\n    --background: white;\n    --card-background: white;\n    --text-color: black;\n}\n* {\n    margin: 0;\n}\nbody {\n    display: grid;\n    height: 100vh;\n    width: 100vw;\n    font-family: 'Josefin Sans', sans-serif;\n    background-color: var(--background);\n    color: var(--text-color);\n}\nbutton{\n    position: absolute;\n    top: 20px;\n    right: 20px;\n    height: 50px;\n    width: 200px;\n    border-radius: 4px;\n}\nhr {\n    margin: 15px 0px 20px;\n    color: #f0f;\n}\n.card {\n    place-self: center;\n    max-width: 300px;\n    padding: 30px 20px;\n    border-radius: 4px;\n    box-shadow: 0 0 5px black;\n    background-color: var(--card-background);\n}\n```\n```javascript script.js\nfunction changeToDarkMode(){\n    document.documentElement.style.setProperty('--background', \"#151515\");\n    document.documentElement.style.setProperty('--card-background', \"#15171A\");\n    document.documentElement.style.setProperty('--text-color', \"white\");\n}\n```\n\nThis results in a webpage with a button that can toggle our page into dark mode like so:\n\n![Dark mode toggle demo](./assets/dark_mode_toggle.gif)\n\n#### Toggling\n\nGreat! So we can turn our website into dark mode with the press of a button... but how do we turn back if we like it better in light mode? This is going to take some engineering on our part.\n\nFirst, we're going to need *another* variable - only this time it'll be in javascript - that can keep track of what mode we are in so we know what mode we'll be toggling into.\n\n```javascript script.js\nlet darkTheme = false;\n\nfunction toggleTheme(){\n    // check if we are currently in dark theme\n    if(darkTheme){\n        // if we are in dark theme, we should switch to 'light' styles\n        document.documentElement.style.setProperty('--background', \"white\");\n        document.documentElement.style.setProperty('--card-background', \"white\");\n        document.documentElement.style.setProperty('--text-color', \"black\");\n    }else{\n        // ...otherwise switch to dark styles\n        document.documentElement.style.setProperty('--background', \"#151515\");\n        document.documentElement.style.setProperty('--card-background', \"#15171A\");\n        document.documentElement.style.setProperty('--text-color', \"white\");\n    }\n    // finally, don't forget to change our darkTheme variable to reflect the new \n    // styles we just added\n    darkTheme = !darkTheme;\n}\n```\n\n#### Saving and loading themes\n\nWhen our user toggles a theme and leaves the website, we should keep track of their preference so that the next time they visit the site, they won't have to toggle again. Here, we can use the built in [LocalStorage]('https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage') object to help us save data in the browser in between sessions (persistent storage).\n\n```javascript script.js\n// the ?? operator is called the nullish-coalescing operator which allows us to \n// set a default value in case a localStorage value is not found\nlet darkTheme = JSON.parse(localStorage.getItem('theme')) ?? false;\n// we also use JSON.parse(...) because localStorage always saves values as a string\n// but we need to parse the string for the actual boolean variable \n\nfunction toggleThemeAndSave(){\n    if(darkTheme){\n        document.documentElement.style.setProperty('--background', \"white\");\n        document.documentElement.style.setProperty('--card-background', \"white\");\n        document.documentElement.style.setProperty('--text-color', \"black\");\n    }else{\n        document.documentElement.style.setProperty('--background', \"#151515\");\n        document.documentElement.style.setProperty('--card-background', \"#15171A\");\n        document.documentElement.style.setProperty('--text-color', \"white\");\n    }\n    // finally, don't forget to change our darkTheme variable to reflect the new \n    // styles we just added and save it to our localstorage\n    darkTheme = !darkTheme;\n    localStorage.setItem('theme', darkTheme);\n}\n```\n\n## Finishing touches\n\nPersonally, I find the sudden swap of CSS styles too abrupt of a change for my eyes. I would much rather prefer a slow, animated transition and thankfully, CSS has a powerful animation style called [CSS Transitions]('https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Transitions/Using_CSS_transitions'). What `transition` allows us to do is specify whether or not the browser should compute animations for us when certain styles are changed. We set the animation style, duration, delay, and even speed and the browser will automatically render it whenever it that style gets changed. It's a lil' confusing so let's take a look at how it works in action:\n\n```css style.css\n:root {\n    --background: white;\n    --card-background: white;\n    --text-color: black;\n}\n* {\n    margin: 0;\n}\nbody {\n    display: grid;\n    height: 100vh;\n    width: 100vw;\n    font-family: 'Josefin Sans', sans-serif;\n    background-color: var(--background);\n    color: var(--text-color);\n\n    /* When background-color or color changes, transition a \n    500 millisecond animation between the 2 values */\n    transition: background-color 500ms, color 500ms;\n}\nbutton{\n    position: absolute;\n    top: 20px;\n    right: 20px;\n    height: 50px;\n    width: 200px;\n    border-radius: 4px;\n}\nhr {\n    margin: 15px 0px 20px;\n    color: #f0f;\n}\n.card {\n    place-self: center;\n    max-width: 300px;\n    padding: 30px 20px;\n    border-radius: 4px;\n    box-shadow: 0 0 5px black;\n    background-color: var(--card-background);\n\n    /* When background-color changes, transition a 500 \n    millisecond animation between the 2 values */\n    transition: background-color 500ms;\n}\n```\n\nWhich results in this:\n\n![Final Demo](./assets/dark_mode_toggle_final.gif)\n\n## Just the code\nYou can find the code for a running example here: [https://github.com/ryqndev/learn-ryqn-dev/tree/content-update/src/content/making-a-theme-switcher/docs](https://github.com/ryqndev/learn-ryqn-dev/tree/content-update/src/content/making-a-theme-switcher/docs)\n\nHow do I run this code? Go ahead and click that link above ^ and download those 3 files (index.html, style.css, and script.js) and open up index.html in the browser. (You can do this by right clicking the file icon and selecting \"Open with...\" and selecting your preferred browser).\n"}},"staticQueryHashes":[],"slicesMap":{}}